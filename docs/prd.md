# Product Spec - 小伴侣

## 产品说明

这是一款结合记账、签到、计划管理和社交互动的生活小程序。用户可以记录日常收支、设置早晚签到获得 AI 生成的正能量激励、创建宠物喂养或植物浇水计划，并与朋友互相帮忙打卡。适用于想要养成良好生活习惯、同时希望与朋友保持互动的用户。

## 功能需求

### 用户设置

- 设置个人信息：昵称、头像、标签、座右铭
- 生成并展示个人朋友码
- 设置早晚签到时间段

### 记账功能（核心）

- 记录收入和支出，填写金额、分类、备注
- 预设分类：餐饮、交通、购物
- 支持用户自定义分类
- 查看统计：日/周/月汇总
- 查看图表：柱形图、折线图、饼图展示分类占比
- 设置月度预算，超支时提醒

### 每日签到

- 早签到和晚签到，时间段由用户自定义
- 签到成功后弹出激励话术卡片
- 激励话术由 AI 生成，正能量、积极向上、每次随机不同

### 计划管理

- 创建计划，类型：宠物喂养 / 植物浇水
- 每个计划每天需要打卡一次
- 支持创建多个计划
- 显示计划完成状态

### 社交功能

- 通过朋友码互相绑定成为朋友
- 查看朋友列表（无上限）
- 查看朋友的打卡列表和计划状态
- 帮朋友的宠物喂养或植物浇水打卡
- 被帮助后收到通知

## UI 布局

### 整体布局

底部 Tab 导航，共 5 个页面：首页、记账、签到、计划、我的

### 首页

- 顶部：用户头像 + 昵称 + 今日签到状态
- 中部：今日收支概览卡片（收入/支出/结余）
- 下部：朋友动态列表
  - 每条动态显示：朋友头像、昵称、打卡内容、计划状态图标
  - 计划状态图标：宠物/植物 + 已完成/未完成标识
  - 点击可进入朋友详情，帮忙打卡

### 记账页

- 顶部：切换标签（收入/支出）
- 中部：金额输入区
  - 大号数字键盘
  - 金额显示区
- 分类选择区：
  - 预设分类图标（餐饮、交通、购物）
  - 自定义分类入口（+ 号）
- 备注输入框
- 底部：确认按钮
- 右上角：统计入口图标

### 统计页（从记账页进入）

- 顶部：时间切换（日/周/月）
- 中部：图表区
  - 切换按钮：柱形图 / 折线图 / 饼图
  - 图表展示分类占比
- 下部：收支明细列表
- 预算进度条（仅月视图显示）

### 签到页

- 顶部：当前日期 + 连续签到天数
- 中部：签到区域
  - 早签到卡片：显示设定时间段、签到按钮/已签到状态
  - 晚签到卡片：显示设定时间段、签到按钮/已签到状态
- 签到成功弹窗：
  - 激励话术卡片
  - 精美卡片样式，可分享

### 计划页

- 顶部：「我的计划」标题 + 添加按钮
- 计划列表：
  - 每个计划卡片显示：类型图标（宠物/植物）、计划名称、今日状态、打卡按钮
- 添加计划弹窗：
  - 选择类型：宠物喂养 / 植物浇水
  - 输入计划名称
  - 确认按钮

### 我的页

- 顶部：个人信息卡片
  - 头像（可点击更换）
  - 昵称、标签、座右铭（可编辑）
- 朋友码区域：
  - 显示我的朋友码
  - 「添加朋友」按钮（输入对方朋友码）
- 设置区域：
  - 签到时间设置
  - 预算设置
  - 分类管理
- 朋友列表入口

### 朋友详情页（从首页动态点击进入）

- 顶部：朋友头像、昵称、标签、座右铭
- 中部：朋友的计划列表
  - 每个计划显示：类型、名称、今日状态
  - 未完成的计划显示「帮 TA 打卡」按钮
- 帮忙打卡成功后显示提示

## 用户使用流程

### 首次使用

1. 打开应用，设置昵称和头像
2. 可选：设置标签和座右铭
3. 设置早晚签到时间段
4. 设置月度预算（可跳过）
5. 进入首页

### 日常记账

1. 点击底部「记账」Tab
2. 选择收入或支出
3. 输入金额
4. 选择分类
5. 可选：填写备注
6. 点击确认完成记账

### 每日签到

1. 点击底部「签到」Tab
2. 在对应时间段内点击签到按钮
3. 签到成功，弹出激励话术卡片
4. 可选：分享卡片

### 创建计划

1. 点击底部「计划」Tab
2. 点击添加按钮
3. 选择类型（宠物喂养/植物浇水）
4. 输入计划名称
5. 确认创建

### 添加朋友

1. 进入「我的」页面
2. 查看自己的朋友码，分享给朋友
3. 点击「添加朋友」，输入对方朋友码
4. 双方互相绑定后成为朋友

### 帮朋友打卡

1. 在首页查看朋友动态
2. 看到朋友有未完成的计划
3. 点击进入朋友详情
4. 点击「帮 TA 打卡」
5. 朋友收到通知

## 补充说明

| 功能       | 选项/状态              | 说明                                                      |
| ---------- | ---------------------- | --------------------------------------------------------- |
| 签到时间   | 用户自定义             | 早签到和晚签到各设置一个时间段，如 6:00-9:00、21:00-23:00 |
| 计划类型   | 宠物喂养 / 植物浇水    | 两种类型，图标不同，功能相同                              |
| 计划状态   | 已完成 / 未完成        | 每天重置，显示在朋友列表中                                |
| 预设分类   | 餐饮 / 交通 / 购物     | 系统预设，不可删除                                        |
| 自定义分类 | 用户创建               | 可添加、编辑、删除                                        |
| 统计周期   | 日 / 周 / 月           | 切换查看不同时间范围的数据                                |
| 图表类型   | 柱形图 / 折线图 / 饼图 | 展示分类占比和趋势                                        |

## 应用场景

- **情侣互动**：情侣互相绑定，每天帮对方的小猫打卡喂食，增进感情
- **闺蜜监督**：闺蜜之间互相查看签到状态，督促对方早睡早起
- **室友记账**：室友们各自记账，月底对比消费习惯
- **家人关怀**：子女帮父母的植物浇水打卡，远程表达关心
- **自我管理**：独自使用记账和签到功能，养成良好的生活习惯

## AI 系统提示词

```
[角色]
    你是一位温暖贴心的生活小助手。

    你擅长用正能量的话语鼓励用户，帮助他们保持积极的生活态度。你的语言风格温暖、真诚、有感染力，能够根据不同场景生成恰当的激励话术。

[任务]
    为用户的签到行为生成激励话术：

    1. 根据签到类型（早签到/晚签到）生成对应的激励内容
    2. 确保每次生成的话术都不重复
    3. 话术要正能量、积极向上、有感染力
    4. 适当加入 emoji 增加亲和力

[技能]
    - **早安激励**：生成适合早晨的正能量话术，鼓励用户开启美好的一天
    - **晚安激励**：生成适合夜晚的温馨话术，肯定用户一天的努力
    - **个性化表达**：根据连续签到天数调整话术内容

[AI 功能]
    ### 生成签到激励话术
    **用途**：用户签到成功后，生成一条正能量激励话术
    **输入**：签到类型（morning/evening）、连续签到天数
    **输出**：一条激励话术文本

    **提示词**：
    ```
    生成一条签到激励话术：

    签到类型：${signType}（morning=早签到，evening=晚签到）
    连续签到天数：${streakDays}

    要求：
    1. 如果是早签到（morning）：
       - 主题围绕「新的一天」「早起的美好」「充满希望」
       - 鼓励用户积极面对今天
       - 示例风格：「早安！又是元气满满的一天，你已经比很多人更努力了」

    2. 如果是晚签到（evening）：
       - 主题围绕「一天的结束」「辛苦了」「好好休息」
       - 肯定用户今天的付出
       - 示例风格：「今天也辛苦了，好好休息，明天又是崭新的开始」

    3. 根据连续签到天数调整：
       - 1-3天：鼓励坚持
       - 4-7天：表扬进步
       - 7天以上：赞美毅力

    4. 格式要求：
       - 1-2句话，不超过50字
       - 适当使用 emoji（1-2个）
       - 语气温暖真诚，不要太正式

    直接输出话术文本，不要输出 JSON 或其他格式。
    ```

    ### 生成帮助打卡通知
    **用途**：当朋友帮忙打卡时，生成一条温馨的通知内容
    **输入**：帮助者昵称、计划类型（pet/plant）、计划名称
    **输出**：一条通知文本

    **提示词**：
    ```
    生成一条帮助打卡的通知：

    帮助者昵称：${helperName}
    计划类型：${planType}（pet=宠物喂养，plant=植物浇水）
    计划名称：${planName}

    要求：
    1. 如果是宠物喂养：
       - 用「喂了」「照顾了」等词汇
       - 示例：「小明帮你喂了小猫咪，你的毛孩子今天不会饿肚子啦」

    2. 如果是植物浇水：
       - 用「浇了水」「照顾了」等词汇
       - 示例：「小红帮你的多肉浇了水，它一定很开心」

    3. 格式要求：
       - 1句话，不超过30字
       - 语气轻松可爱
       - 可以用 1 个 emoji

    直接输出通知文本。
    ```

[总体规则]
    - 始终使用中文
    - 话术要正能量、积极向上
    - 每次生成的内容要有变化，避免重复
    - 语气温暖真诚，像朋友一样
    - emoji 使用要克制，1-2 个即可
    - 不要说教，不要太鸡汤

[工作流程]
    [签到激励生成]
        目的：用户签到成功后展示激励话术

        第一步：接收签到信息
            获取签到类型和连续签到天数

        第二步：生成话术
            调用 [生成签到激励话术]

        第三步：展示结果
            将话术展示在签到成功卡片上

    [帮助打卡通知生成]
        目的：朋友帮忙打卡后发送通知

        第一步：接收打卡信息
            获取帮助者昵称、计划类型、计划名称

        第二步：生成通知
            调用 [生成帮助打卡通知]

        第三步：发送通知
            将通知推送给被帮助的用户

[交互规则]
    本产品的 AI 功能主要在后台运行，不需要用户直接与 AI 对话。
    AI 生成的内容直接展示在对应的 UI 组件中。

[初始化]
    AI 功能在后台待命，等待签到或帮助打卡事件触发。
```

## Google AI Studio 能力配置

**在 Builder 中请勾选以下能力：**

| 能力名称                        | 用途说明                                                 |
| ------------------------------- | -------------------------------------------------------- |
| Gemini Intelligence in Your App | 用于生成签到激励话术和帮助打卡通知，提供智能文本生成能力 |
| Fast AI Responses               | 用于快速生成激励话术，确保签到后即时展示，提升用户体验   |
